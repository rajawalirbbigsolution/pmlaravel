<?php
 require_once __DIR__.'/../../vendor/autoload.php'; $server = new League\OAuth1\Client\Server\Xing(array( 'identifier' => 'your-identifier', 'secret' => 'your-secret', 'callback_uri' => "http://your-callback-uri/", )); session_start(); if (isset($_GET['user'])) { if ( ! isset($_SESSION['token_credentials'])) { echo 'No token credentials.'; exit(1); } $tokenCredentials = unserialize($_SESSION['token_credentials']); $user = $server->getUserDetails($tokenCredentials); var_dump($user); } elseif (isset($_GET['oauth_token']) && isset($_GET['oauth_verifier'])) { $temporaryCredentials = unserialize($_SESSION['temporary_credentials']); $tokenCredentials = $server->getTokenCredentials($temporaryCredentials, $_GET['oauth_token'], $_GET['oauth_verifier']); unset($_SESSION['temporary_credentials']); $_SESSION['token_credentials'] = serialize($tokenCredentials); session_write_close(); header("Location: http://{$_SERVER['HTTP_HOST']}/?user=user"); exit; } elseif (isset($_GET['denied'])) { echo 'Hey! You denied the client access to your Xing account! If you did this by mistake, you should <a href="?go=go">try again</a>.'; } elseif (isset($_GET['go'])) { $temporaryCredentials = $server->getTemporaryCredentials(); $_SESSION['temporary_credentials'] = serialize($temporaryCredentials); session_write_close(); $server->authorize($temporaryCredentials); } else { echo '<a href="?go=go">Login</a>'; } 