<?php
 namespace Illuminate\Foundation\Providers; use Illuminate\Http\Request; use Illuminate\Support\AggregateServiceProvider; class FoundationServiceProvider extends AggregateServiceProvider { protected $providers = [ FormRequestServiceProvider::class, ]; public function register() { parent::register(); $this->registerRequestValidate(); } public function registerRequestValidate() { Request::macro('validate', function (array $rules, ...$params) { validator()->validate($this->all(), $rules, ...$params); return $this->only(collect($rules)->keys()->map(function ($rule) { return str_contains($rule, '.') ? explode('.', $rule)[0] : $rule; })->unique()->toArray()); }); } } 